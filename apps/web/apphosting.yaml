runConfig:
  runtime: nodejs20
  concurrency: 40
  minInstances: 1
  maxInstances: 3
  cpu: 1
  memoryMiB: 1792
  vpcAccess:
    connector: projects/adult-v/locations/asia-east1/connectors/adult-v-connector
    egress: PRIVATE_RANGES_ONLY

env:
  - variable: NODE_ENV
    value: production
    availability:
      - BUILD
      - RUNTIME
  - variable: DATABASE_URL
    secret: database-url
  - variable: NEXT_PUBLIC_SITE_URL
    value: https://www.adult-v.com
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_GA_ID
    value: G-V2X2861X15
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: firebase-api-key
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: adult-v.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: adult-v
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: adult-v.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "646431984228"
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: 1:646431984228:web:2c1b75ca97a4b034856d71
    availability:
      - BUILD
      - RUNTIME
  # Google Search Console verification
  # GSCの「HTMLタグ」方式で取得した認証コードを設定
  # https://search.google.com/search-console → プロパティ追加 → HTMLタグ → content値をコピー
  - variable: NEXT_PUBLIC_GOOGLE_SITE_VERIFICATION
    value: uCpAKCjxZfjrmEJH_eOrcsnXh88s8HKcwTbz9Wo9wIc
    availability:
      - BUILD
      - RUNTIME
  # DeepL API Key for translation
  - variable: DEEPL_API_KEY
    secret: deepl-api-key
  # Sentry Configuration
  - variable: SENTRY_DSN
    secret: sentry-dsn
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_SENTRY_DSN
    secret: sentry-dsn
    availability:
      - BUILD
      - RUNTIME
  - variable: SENTRY_ORG
    value: avviewer-lab
    availability:
      - BUILD
  - variable: SENTRY_PROJECT
    value: mgs
    availability:
      - BUILD
  # Upstash Redis Cache
  - variable: UPSTASH_REDIS_REST_URL
    secret: upstash-redis-url
  - variable: UPSTASH_REDIS_REST_TOKEN
    secret: upstash-redis-token
  # Google Service Account for Indexing API
  - variable: GOOGLE_SERVICE_ACCOUNT_KEY
    secret: google-service-account-key
  # Gemini API Key for LLM features
  - variable: GEMINI_API_KEY
    secret: gemini-api-key
  # DUGA API credentials
  - variable: DUGA_APP_ID
    secret: duga-app-id
  - variable: DUGA_AGENT_ID
    secret: duga-agent-id
  # SOKMIL API Key
  - variable: SOKMIL_API_KEY
    secret: sokmil-api-key
